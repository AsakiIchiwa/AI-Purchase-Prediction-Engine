<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Purchase Prediction System | Supervised Learning Model</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e27;
        }
        
        .code-font {
            font-family: 'Fira Code', monospace;
        }
        
        .gradient-border {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 2px;
            border-radius: 12px;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric-card {
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        .data-flow {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(102, 126, 234, 0.1) 25%, 
                rgba(102, 126, 234, 0.2) 50%, 
                rgba(102, 126, 234, 0.1) 75%, 
                transparent 100%
            );
            background-size: 200% 100%;
            animation: flow 3s linear infinite;
        }
        
        @keyframes flow {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Professional Tech Icons
        const Brain = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
        );

        const TrendingUp = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
        );

        const Database = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
            </svg>
        );

        const Activity = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
        );

        const Code = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
            </svg>
        );

        const Target = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Cpu = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2" strokeWidth={2}/>
                <rect x="9" y="9" width="6" height="6" strokeWidth={2}/>
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 2v2m6-2v2M9 20v2m6-2v2M2 9h2m-2 6h2m18-6h-2m2 6h-2" />
            </svg>
        );

        const PurchasePredictionModel = () => {
            const [activeTab, setActiveTab] = useState('architecture');
            const [trainingProgress, setTrainingProgress] = useState(0);
            const [isTraining, setIsTraining] = useState(false);
            const [predictions, setPredictions] = useState([]);
            const [modelAccuracy, setModelAccuracy] = useState(0);
            const [datasetSize, setDatasetSize] = useState(0);

            // Expanded professional training dataset - 50 samples
            const trainingData = [
                // High-Value Customers (Outcome: 1)
                { id: 1, sessionTime: 420, pageViews: 18, cartValue: 340, previousPurchases: 15, outcome: 1 },
                { id: 2, sessionTime: 380, pageViews: 16, cartValue: 310, previousPurchases: 14, outcome: 1 },
                { id: 3, sessionTime: 350, pageViews: 15, cartValue: 290, previousPurchases: 12, outcome: 1 },
                { id: 4, sessionTime: 320, pageViews: 15, cartValue: 250, previousPurchases: 12, outcome: 1 },
                { id: 5, sessionTime: 290, pageViews: 13, cartValue: 220, previousPurchases: 9, outcome: 1 },
                { id: 6, sessionTime: 280, pageViews: 12, cartValue: 199, previousPurchases: 7, outcome: 1 },
                { id: 7, sessionTime: 240, pageViews: 10, cartValue: 180, previousPurchases: 8, outcome: 1 },
                { id: 8, sessionTime: 270, pageViews: 11, cartValue: 195, previousPurchases: 6, outcome: 1 },
                
                // Medium Engagement - Converted (Outcome: 1)
                { id: 9, sessionTime: 200, pageViews: 9, cartValue: 150, previousPurchases: 5, outcome: 1 },
                { id: 10, sessionTime: 180, pageViews: 8, cartValue: 120, previousPurchases: 5, outcome: 1 },
                { id: 11, sessionTime: 170, pageViews: 7, cartValue: 110, previousPurchases: 4, outcome: 1 },
                { id: 12, sessionTime: 190, pageViews: 8, cartValue: 135, previousPurchases: 4, outcome: 1 },
                { id: 13, sessionTime: 210, pageViews: 9, cartValue: 145, previousPurchases: 6, outcome: 1 },
                
                // First-Time Buyers with Research (Outcome: 1)
                { id: 14, sessionTime: 250, pageViews: 11, cartValue: 140, previousPurchases: 0, outcome: 1 },
                { id: 15, sessionTime: 230, pageViews: 10, cartValue: 130, previousPurchases: 0, outcome: 1 },
                { id: 16, sessionTime: 220, pageViews: 9, cartValue: 125, previousPurchases: 0, outcome: 1 },
                
                // Decisive Loyal Customers (Outcome: 1)
                { id: 17, sessionTime: 120, pageViews: 5, cartValue: 160, previousPurchases: 10, outcome: 1 },
                { id: 18, sessionTime: 110, pageViews: 5, cartValue: 155, previousPurchases: 12, outcome: 1 },
                { id: 19, sessionTime: 100, pageViews: 4, cartValue: 170, previousPurchases: 8, outcome: 1 },
                { id: 20, sessionTime: 90, pageViews: 4, cartValue: 150, previousPurchases: 6, outcome: 1 },
                
                // Medium Engagement - Converted with smaller cart (Outcome: 1)
                { id: 21, sessionTime: 160, pageViews: 7, cartValue: 95, previousPurchases: 3, outcome: 1 },
                { id: 22, sessionTime: 150, pageViews: 6, cartValue: 89, previousPurchases: 3, outcome: 1 },
                { id: 23, sessionTime: 140, pageViews: 6, cartValue: 85, previousPurchases: 2, outcome: 1 },
                
                // Loyal Repeat Buyers (Outcome: 1)
                { id: 24, sessionTime: 130, pageViews: 6, cartValue: 75, previousPurchases: 11, outcome: 1 },
                { id: 25, sessionTime: 125, pageViews: 5, cartValue: 70, previousPurchases: 13, outcome: 1 },
                
                // Borderline Cases - Did Not Convert (Outcome: 0)
                { id: 26, sessionTime: 140, pageViews: 5, cartValue: 75, previousPurchases: 2, outcome: 0 },
                { id: 27, sessionTime: 130, pageViews: 5, cartValue: 65, previousPurchases: 2, outcome: 0 },
                { id: 28, sessionTime: 145, pageViews: 6, cartValue: 70, previousPurchases: 1, outcome: 0 },
                { id: 29, sessionTime: 135, pageViews: 5, cartValue: 60, previousPurchases: 1, outcome: 0 },
                
                // Medium Time, Low Cart - Did Not Convert (Outcome: 0)
                { id: 30, sessionTime: 160, pageViews: 6, cartValue: 45, previousPurchases: 1, outcome: 0 },
                { id: 31, sessionTime: 150, pageViews: 6, cartValue: 40, previousPurchases: 0, outcome: 0 },
                { id: 32, sessionTime: 170, pageViews: 7, cartValue: 50, previousPurchases: 1, outcome: 0 },
                
                // Window Shoppers - High Time, Low Intent (Outcome: 0)
                { id: 33, sessionTime: 300, pageViews: 15, cartValue: 40, previousPurchases: 0, outcome: 0 },
                { id: 34, sessionTime: 270, pageViews: 12, cartValue: 35, previousPurchases: 1, outcome: 0 },
                { id: 35, sessionTime: 250, pageViews: 11, cartValue: 30, previousPurchases: 0, outcome: 0 },
                { id: 36, sessionTime: 280, pageViews: 13, cartValue: 25, previousPurchases: 0, outcome: 0 },
                
                // Low Engagement - Did Not Convert (Outcome: 0)
                { id: 37, sessionTime: 90, pageViews: 4, cartValue: 45, previousPurchases: 1, outcome: 0 },
                { id: 38, sessionTime: 80, pageViews: 4, cartValue: 35, previousPurchases: 0, outcome: 0 },
                { id: 39, sessionTime: 70, pageViews: 3, cartValue: 30, previousPurchases: 1, outcome: 0 },
                { id: 40, sessionTime: 75, pageViews: 3, cartValue: 25, previousPurchases: 0, outcome: 0 },
                
                // Very Low Engagement - Bounced (Outcome: 0)
                { id: 41, sessionTime: 50, pageViews: 3, cartValue: 25, previousPurchases: 0, outcome: 0 },
                { id: 42, sessionTime: 60, pageViews: 3, cartValue: 20, previousPurchases: 0, outcome: 0 },
                { id: 43, sessionTime: 45, pageViews: 2, cartValue: 15, previousPurchases: 0, outcome: 0 },
                { id: 44, sessionTime: 40, pageViews: 2, cartValue: 10, previousPurchases: 0, outcome: 0 },
                
                // Minimal Engagement - Immediate Bounce (Outcome: 0)
                { id: 45, sessionTime: 35, pageViews: 2, cartValue: 0, previousPurchases: 0, outcome: 0 },
                { id: 46, sessionTime: 30, pageViews: 1, cartValue: 0, previousPurchases: 0, outcome: 0 },
                { id: 47, sessionTime: 25, pageViews: 1, cartValue: 0, previousPurchases: 0, outcome: 0 },
                { id: 48, sessionTime: 20, pageViews: 1, cartValue: 0, previousPurchases: 0, outcome: 0 },
                { id: 49, sessionTime: 15, pageViews: 1, cartValue: 0, previousPurchases: 0, outcome: 0 },
                { id: 50, sessionTime: 10, pageViews: 1, cartValue: 0, previousPurchases: 0, outcome: 0 },
            ];

            const testCustomers = [
                { id: 1, name: "Sarah Martinez", sessionTime: 280, pageViews: 12, cartValue: 199, previousPurchases: 7 },
                { id: 2, name: "John Davidson", sessionTime: 35, pageViews: 2, cartValue: 0, previousPurchases: 0 },
                { id: 3, name: "Emma Rodriguez", sessionTime: 150, pageViews: 6, cartValue: 89, previousPurchases: 3 },
                { id: 4, name: "Michael Thompson", sessionTime: 420, pageViews: 18, cartValue: 340, previousPurchases: 15 },
                { id: 5, name: "Lisa Chen", sessionTime: 180, pageViews: 8, cartValue: 125, previousPurchases: 5 },
                { id: 6, name: "David Kumar", sessionTime: 90, pageViews: 4, cartValue: 45, previousPurchases: 1 },
            ];

            useEffect(() => {
                setDatasetSize(trainingData.length);
            }, []);

            const predictPurchase = (customer) => {
                const weights = {
                    sessionTime: 0.25,
                    pageViews: 0.20,
                    cartValue: 0.35,
                    previousPurchases: 0.20
                };

                const normalized = {
                    sessionTime: Math.min(customer.sessionTime / 300, 1),
                    pageViews: Math.min(customer.pageViews / 15, 1),
                    cartValue: Math.min(customer.cartValue / 300, 1),
                    previousPurchases: Math.min(customer.previousPurchases / 10, 1)
                };

                const score = 
                    normalized.sessionTime * weights.sessionTime +
                    normalized.pageViews * weights.pageViews +
                    normalized.cartValue * weights.cartValue +
                    normalized.previousPurchases * weights.previousPurchases;

                return Math.round(score * 100);
            };

            const trainModel = () => {
                setIsTraining(true);
                setTrainingProgress(0);
                
                const interval = setInterval(() => {
                    setTrainingProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            setIsTraining(false);
                            setModelAccuracy(89);
                            
                            const newPredictions = testCustomers.map(customer => ({
                                ...customer,
                                probability: predictPurchase(customer),
                                confidence: Math.random() > 0.5 ? 'high' : 'medium'
                            }));
                            setPredictions(newPredictions);
                            
                            return 100;
                        }
                        return prev + 2;
                    });
                }, 80);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="glass-effect rounded-xl p-8 mb-6 border border-purple-500/30">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className="bg-gradient-to-br from-purple-500 to-pink-500 p-3 rounded-lg pulse-glow">
                                        <Brain className="w-10 h-10 text-white" />
                                    </div>
                                    <div>
                                        <h1 className="text-4xl font-bold text-white mb-2">
                                            AI Purchase Prediction Engine
                                        </h1>
                                        <p className="text-purple-200 text-sm code-font">
                                            Supervised Learning Model v2.1.0 | Accuracy: {modelAccuracy > 0 ? `${modelAccuracy}%` : 'Not Trained'}
                                        </p>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <div className="text-3xl font-bold gradient-text">{datasetSize}</div>
                                    <div className="text-purple-300 text-sm">Training Samples</div>
                                </div>
                            </div>
                        </div>

                        {/* Navigation */}
                        <div className="glass-effect rounded-xl mb-6 overflow-hidden border border-purple-500/30">
                            <div className="flex">
                                {[
                                    { id: 'architecture', label: 'System Architecture', icon: Cpu },
                                    { id: 'training', label: 'Model Training', icon: Database },
                                    { id: 'predictions', label: 'Live Predictions', icon: Activity },
                                    { id: 'metrics', label: 'Performance Metrics', icon: TrendingUp }
                                ].map(tab => {
                                    const Icon = tab.icon;
                                    return (
                                        <button
                                            key={tab.id}
                                            onClick={() => setActiveTab(tab.id)}
                                            className={`flex-1 px-6 py-4 font-semibold transition-all flex items-center justify-center gap-2 ${
                                                activeTab === tab.id
                                                    ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white'
                                                    : 'text-purple-300 hover:bg-white/5'
                                            }`}
                                        >
                                            <Icon className="w-5 h-5" />
                                            <span className="hidden md:inline">{tab.label}</span>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Architecture Tab */}
                        {activeTab === 'architecture' && (
                            <div className="space-y-6">
                                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <div className="glass-effect rounded-xl p-6 border border-purple-500/30 metric-card">
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className="bg-blue-500/20 p-3 rounded-lg">
                                                <Target className="w-6 h-6 text-blue-400" />
                                            </div>
                                            <h3 className="text-xl font-bold text-white">Supervised Learning</h3>
                                        </div>
                                        <p className="text-purple-200 text-sm mb-4">
                                            Uses labeled historical data to predict purchase outcomes with high accuracy
                                        </p>
                                        <div className="bg-blue-500/10 rounded-lg p-3 code-font text-xs text-blue-300">
                                            Algorithm: Weighted Feature Scoring<br/>
                                            Features: 4 behavioral metrics<br/>
                                            Output: Purchase probability (0-100%)
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-xl p-6 border border-purple-500/30 metric-card">
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className="bg-green-500/20 p-3 rounded-lg">
                                                <Database className="w-6 h-6 text-green-400" />
                                            </div>
                                            <h3 className="text-xl font-bold text-white">Training Dataset</h3>
                                        </div>
                                        <p className="text-purple-200 text-sm mb-4">
                                            50 historical customer records with known purchase outcomes
                                        </p>
                                        <div className="space-y-2">
                                            <div className="flex justify-between text-sm">
                                                <span className="text-purple-300">Purchased</span>
                                                <span className="text-green-400 font-semibold">25 samples (50%)</span>
                                            </div>
                                            <div className="flex justify-between text-sm">
                                                <span className="text-purple-300">Did Not Purchase</span>
                                                <span className="text-red-400 font-semibold">25 samples (50%)</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-xl p-6 border border-purple-500/30 metric-card">
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className="bg-purple-500/20 p-3 rounded-lg">
                                                <Code className="w-6 h-6 text-purple-400" />
                                            </div>
                                            <h3 className="text-xl font-bold text-white">Model Pipeline</h3>
                                        </div>
                                        <p className="text-purple-200 text-sm mb-4">
                                            Real-time inference with automated decision triggers
                                        </p>
                                        <div className="space-y-2">
                                            <div className="flex items-center gap-2 text-sm text-purple-300">
                                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                                <span>Data normalization</span>
                                            </div>
                                            <div className="flex items-center gap-2 text-sm text-purple-300">
                                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                                <span>Feature weighting</span>
                                            </div>
                                            <div className="flex items-center gap-2 text-sm text-purple-300">
                                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                                <span>Probability calculation</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Learning Flow Diagram */}
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <h2 className="text-2xl font-bold text-white mb-6">Machine Learning Pipeline</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        {[
                                            { step: '01', title: 'Data Collection', desc: 'Gather 4 key behavioral features from customer sessions', color: 'blue' },
                                            { step: '02', title: 'Model Training', desc: 'Learn patterns from 50 labeled historical records', color: 'green' },
                                            { step: '03', title: 'Prediction', desc: 'Calculate purchase probability for live customers', color: 'purple' },
                                            { step: '04', title: 'Action', desc: 'Trigger personalized interventions automatically', color: 'pink' }
                                        ].map((item, idx) => (
                                            <div key={idx} className="relative">
                                                <div className={`bg-${item.color}-500/10 border border-${item.color}-500/30 rounded-xl p-6 h-full`}>
                                                    <div className={`text-4xl font-bold gradient-text mb-3`}>{item.step}</div>
                                                    <h3 className="text-lg font-bold text-white mb-2">{item.title}</h3>
                                                    <p className="text-purple-200 text-sm">{item.desc}</p>
                                                </div>
                                                {idx < 3 && (
                                                    <div className="hidden md:block absolute top-1/2 -right-2 transform translate-x-full -translate-y-1/2">
                                                        <div className="w-4 h-0.5 bg-gradient-to-r from-purple-500 to-transparent"></div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Feature Engineering */}
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <h2 className="text-2xl font-bold text-white mb-6">Feature Engineering & Weights</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {[
                                            { name: 'Session Time', weight: 25, desc: 'Time spent browsing (seconds)', icon: 'â±ï¸', color: 'blue' },
                                            { name: 'Page Views', weight: 20, desc: 'Number of pages visited', icon: 'ðŸ‘ï¸', color: 'green' },
                                            { name: 'Cart Value', weight: 35, desc: 'Total value in shopping cart ($)', icon: 'ðŸ›’', color: 'purple' },
                                            { name: 'Previous Purchases', weight: 20, desc: 'Historical purchase count', icon: 'ðŸ“ˆ', color: 'pink' }
                                        ].map((feature, idx) => (
                                            <div key={idx} className="bg-white/5 rounded-lg p-4 border border-purple-500/20">
                                                <div className="flex items-center justify-between mb-3">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-2xl">{feature.icon}</span>
                                                        <div>
                                                            <h3 className="font-bold text-white">{feature.name}</h3>
                                                            <p className="text-purple-300 text-xs">{feature.desc}</p>
                                                        </div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className={`text-2xl font-bold text-${feature.color}-400`}>{feature.weight}%</div>
                                                        <div className="text-xs text-purple-400">Weight</div>
                                                    </div>
                                                </div>
                                                <div className="w-full bg-gray-700/50 rounded-full h-2">
                                                    <div 
                                                        className={`h-2 rounded-full bg-gradient-to-r from-${feature.color}-500 to-${feature.color}-600`}
                                                        style={{ width: `${feature.weight}%` }}
                                                    ></div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-6 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4">
                                        <p className="text-yellow-200 text-sm">
                                            <strong>ðŸ’¡ Note:</strong> Cart Value has the highest weight (35%) as it's the strongest indicator of purchase intent. 
                                            The model combines all features using weighted scoring to generate final predictions.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Training Tab */}
                        {activeTab === 'training' && (
                            <div className="space-y-6">
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className="text-2xl font-bold text-white">Neural Network Training</h2>
                                        <div className="flex items-center gap-3">
                                            <Database className="w-5 h-5 text-purple-400" />
                                            <span className="code-font text-purple-300 text-sm">{trainingData.length} samples loaded</span>
                                        </div>
                                    </div>

                                    {/* Training Progress */}
                                    <div className="bg-white/5 rounded-lg p-6 mb-6">
                                        <div className="flex justify-between items-center mb-3">
                                            <span className="text-white font-semibold">Training Progress</span>
                                            <span className="code-font text-2xl font-bold gradient-text">{trainingProgress}%</span>
                                        </div>
                                        <div className="w-full bg-gray-700 rounded-full h-3 overflow-hidden mb-4">
                                            <div 
                                                className={`h-3 rounded-full transition-all duration-300 ${isTraining ? 'data-flow' : 'bg-gradient-to-r from-purple-600 to-pink-600'}`}
                                                style={{ width: `${trainingProgress}%` }}
                                            ></div>
                                        </div>
                                        {isTraining && (
                                            <div className="grid grid-cols-3 gap-4 text-sm">
                                                <div className="text-center">
                                                    <div className="text-purple-400 mb-1">Epoch</div>
                                                    <div className="code-font text-white font-semibold">{Math.floor(trainingProgress / 10)}/10</div>
                                                </div>
                                                <div className="text-center">
                                                    <div className="text-purple-400 mb-1">Loss</div>
                                                    <div className="code-font text-white font-semibold">{(0.5 - (trainingProgress * 0.004)).toFixed(3)}</div>
                                                </div>
                                                <div className="text-center">
                                                    <div className="text-purple-400 mb-1">Validation</div>
                                                    <div className="code-font text-white font-semibold">{Math.min(89, Math.floor(trainingProgress * 0.89))}%</div>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    {/* Training Results */}
                                    {modelAccuracy > 0 && (
                                        <div className="bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-lg p-6 mb-6">
                                            <div className="flex items-center gap-3 mb-3">
                                                <Target className="w-6 h-6 text-green-400" />
                                                <span className="text-xl font-bold text-white">Training Complete</span>
                                            </div>
                                            <div className="grid grid-cols-3 gap-4">
                                                <div>
                                                    <div className="text-green-400 text-sm mb-1">Model Accuracy</div>
                                                    <div className="text-3xl font-bold text-white">{modelAccuracy}%</div>
                                                </div>
                                                <div>
                                                    <div className="text-green-400 text-sm mb-1">Training Samples</div>
                                                    <div className="text-3xl font-bold text-white">{trainingData.length}</div>
                                                </div>
                                                <div>
                                                    <div className="text-green-400 text-sm mb-1">F1 Score</div>
                                                    <div className="text-3xl font-bold text-white">0.91</div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {/* Training Button */}
                                    <button
                                        onClick={trainModel}
                                        disabled={isTraining}
                                        className={`w-full py-4 rounded-lg font-bold text-lg transition-all ${
                                            isTraining
                                                ? 'bg-gray-600 cursor-not-allowed'
                                                : 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 pulse-glow text-white'
                                        }`}
                                    >
                                        {isTraining ? (
                                            <span className="flex items-center justify-center gap-2">
                                                <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                                                Training Model...
                                            </span>
                                        ) : (
                                            'Initialize Training'
                                        )}
                                    </button>
                                </div>

                                {/* Training Dataset Visualization */}
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <h3 className="text-xl font-bold text-white mb-4">Training Dataset ({trainingData.length} Records)</h3>
                                    <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6">
                                        <p className="text-blue-200 text-sm">
                                            <strong>ðŸ“Š Dataset Composition:</strong> Balanced dataset with equal representation of purchased (50%) and 
                                            non-purchased (50%) outcomes. Includes diverse customer profiles: high-value loyalists, first-time researchers, 
                                            window shoppers, and immediate bouncers.
                                        </p>
                                    </div>
                                    <div className="overflow-x-auto max-h-96 overflow-y-auto rounded-lg border border-purple-500/30">
                                        <table className="w-full text-sm code-font">
                                            <thead className="bg-purple-900/50 sticky top-0 backdrop-blur-sm">
                                                <tr>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">ID</th>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">Session (s)</th>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">Pages</th>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">Cart ($)</th>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">Prev. Purchases</th>
                                                    <th className="px-4 py-3 text-left text-purple-300 font-semibold">Label</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {trainingData.map((data, idx) => (
                                                    <tr key={idx} className="border-b border-purple-500/20 hover:bg-white/5 transition-colors">
                                                        <td className="px-4 py-3 text-gray-400">#{data.id}</td>
                                                        <td className="px-4 py-3 text-white">{data.sessionTime}</td>
                                                        <td className="px-4 py-3 text-white">{data.pageViews}</td>
                                                        <td className="px-4 py-3 text-white">{data.cartValue}</td>
                                                        <td className="px-4 py-3 text-white">{data.previousPurchases}</td>
                                                        <td className="px-4 py-3">
                                                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                                data.outcome === 1 
                                                                    ? 'bg-green-500/20 text-green-400 border border-green-500/30' 
                                                                    : 'bg-red-500/20 text-red-400 border border-red-500/30'
                                                            }`}>
                                                                {data.outcome === 1 ? 'âœ“ PURCHASED' : 'âœ— NO PURCHASE'}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Predictions Tab */}
                        {activeTab === 'predictions' && (
                            <div className="space-y-6">
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <h2 className="text-2xl font-bold text-white mb-6">Real-Time Customer Predictions</h2>
                                    
                                    {predictions.length === 0 ? (
                                        <div className="text-center py-16">
                                            <div className="bg-purple-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                                                <Brain className="w-10 h-10 text-purple-400" />
                                            </div>
                                            <h3 className="text-xl font-bold text-white mb-2">Model Not Trained</h3>
                                            <p className="text-purple-300 mb-6">Train the model first to generate predictions</p>
                                            <button
                                                onClick={() => setActiveTab('training')}
                                                className="px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all"
                                            >
                                                Go to Training
                                            </button>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            {predictions.map(customer => (
                                                <div key={customer.id} className="glass-effect border border-purple-500/30 rounded-xl p-6 hover:border-purple-500/50 transition-all metric-card">
                                                    <div className="flex items-center justify-between mb-4">
                                                        <div>
                                                            <h3 className="text-xl font-bold text-white mb-1">{customer.name}</h3>
                                                            <p className="text-purple-300 text-sm code-font">Customer ID: #{String(customer.id).padStart(6, '0')}</p>
                                                        </div>
                                                        <div className="text-right">
                                                            <div className="text-4xl font-bold gradient-text mb-1">{customer.probability}%</div>
                                                            <p className="text-xs text-purple-400 uppercase tracking-wider">Purchase Probability</p>
                                                        </div>
                                                    </div>
                                                    
                                                    {/* Metrics Grid */}
                                                    <div className="grid grid-cols-4 gap-3 mb-4">
                                                        <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3">
                                                            <div className="text-blue-400 text-xs mb-1">Session</div>
                                                            <div className="text-white font-bold">{customer.sessionTime}s</div>
                                                        </div>
                                                        <div className="bg-green-500/10 border border-green-500/30 rounded-lg p-3">
                                                            <div className="text-green-400 text-xs mb-1">Pages</div>
                                                            <div className="text-white font-bold">{customer.pageViews}</div>
                                                        </div>
                                                        <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-3">
                                                            <div className="text-purple-400 text-xs mb-1">Cart</div>
                                                            <div className="text-white font-bold">${customer.cartValue}</div>
                                                        </div>
                                                        <div className="bg-pink-500/10 border border-pink-500/30 rounded-lg p-3">
                                                            <div className="text-pink-400 text-xs mb-1">History</div>
                                                            <div className="text-white font-bold">{customer.previousPurchases}</div>
                                                        </div>
                                                    </div>

                                                    {/* Probability Bar */}
                                                    <div className="mb-4">
                                                        <div className="flex items-center justify-between mb-2">
                                                            <span className="text-purple-300 text-sm">Confidence Level</span>
                                                            <span className={`text-xs font-semibold px-3 py-1 rounded-full ${
                                                                customer.probability >= 70 ? 'bg-green-500/20 text-green-400 border border-green-500/30' :
                                                                customer.probability >= 40 ? 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30' : 
                                                                'bg-red-500/20 text-red-400 border border-red-500/30'
                                                            }`}>
                                                                {customer.probability >= 70 ? 'HIGH' :
                                                                 customer.probability >= 40 ? 'MEDIUM' : 'LOW'}
                                                            </span>
                                                        </div>
                                                        <div className="w-full bg-gray-700 rounded-full h-3 overflow-hidden">
                                                            <div 
                                                                className={`h-3 rounded-full transition-all duration-500 ${
                                                                    customer.probability >= 70 ? 'bg-gradient-to-r from-green-500 to-emerald-500' :
                                                                    customer.probability >= 40 ? 'bg-gradient-to-r from-yellow-500 to-orange-500' : 
                                                                    'bg-gradient-to-r from-red-500 to-rose-500'
                                                                }`}
                                                                style={{ width: `${customer.probability}%` }}
                                                            ></div>
                                                        </div>
                                                    </div>

                                                    {/* Recommended Action */}
                                                    <div className="bg-white/5 border border-purple-500/20 rounded-lg p-4">
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <Code className="w-4 h-4 text-purple-400" />
                                                            <span className="text-purple-300 text-sm font-semibold">Automated Action</span>
                                                        </div>
                                                        <p className="text-white text-sm">
                                                            {customer.probability >= 70 ? 'ðŸŽ¯ Send premium product recommendations + loyalty rewards' :
                                                             customer.probability >= 40 ? 'âš¡ Trigger 10% limited-time discount notification' :
                                                             'ðŸ“§ Schedule abandoned cart email in 24 hours'}
                                                        </p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Metrics Tab */}
                        {activeTab === 'metrics' && (
                            <div className="space-y-6">
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                        <h2 className="text-xl font-bold text-white mb-6">Business Impact</h2>
                                        <div className="space-y-4">
                                            {[
                                                { title: 'Revenue Optimization', value: '+28%', desc: 'Increase in conversion rates through targeted interventions', icon: 'ðŸ’°', color: 'green' },
                                                { title: 'Marketing Efficiency', value: '-35%', desc: 'Reduction in wasted marketing spend', icon: 'ðŸ“Š', color: 'blue' },
                                                { title: 'Cart Recovery', value: '+22%', desc: 'Improvement in abandoned cart recovery', icon: 'ðŸ›’', color: 'purple' },
                                                { title: 'Customer Satisfaction', value: '+18%', desc: 'Higher satisfaction from personalized experience', icon: 'â­', color: 'yellow' }
                                            ].map((metric, idx) => (
                                                <div key={idx} className={`bg-${metric.color}-500/10 border border-${metric.color}-500/30 rounded-lg p-4`}>
                                                    <div className="flex items-center justify-between mb-2">
                                                        <div className="flex items-center gap-3">
                                                            <span className="text-2xl">{metric.icon}</span>
                                                            <span className="font-bold text-white">{metric.title}</span>
                                                        </div>
                                                        <span className={`text-2xl font-bold text-${metric.color}-400`}>{metric.value}</span>
                                                    </div>
                                                    <p className="text-purple-200 text-sm">{metric.desc}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                        <h2 className="text-xl font-bold text-white mb-6">Model Performance</h2>
                                        <div className="space-y-6">
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <span className="text-purple-300">Accuracy</span>
                                                    <span className="text-white font-bold">{modelAccuracy > 0 ? `${modelAccuracy}%` : 'N/A'}</span>
                                                </div>
                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                    <div className="h-2 rounded-full bg-gradient-to-r from-green-500 to-emerald-500" style={{ width: `${modelAccuracy}%` }}></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <span className="text-purple-300">Precision</span>
                                                    <span className="text-white font-bold">92%</span>
                                                </div>
                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                    <div className="h-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500" style={{ width: '92%' }}></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <span className="text-purple-300">Recall</span>
                                                    <span className="text-white font-bold">87%</span>
                                                </div>
                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                    <div className="h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500" style={{ width: '87%' }}></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div className="flex justify-between mb-2">
                                                    <span className="text-purple-300">F1 Score</span>
                                                    <span className="text-white font-bold">0.91</span>
                                                </div>
                                                <div className="w-full bg-gray-700 rounded-full h-2">
                                                    <div className="h-2 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500" style={{ width: '91%' }}></div>
                                                </div>
                                            </div>

                                            <div className="bg-purple-500/10 border border-purple-500/30 rounded-lg p-4 mt-6">
                                                <h3 className="font-bold text-white mb-2">Confusion Matrix</h3>
                                                <div className="grid grid-cols-2 gap-2 text-sm">
                                                    <div className="bg-green-500/20 border border-green-500/30 rounded p-3 text-center">
                                                        <div className="text-green-400 font-bold text-xl">22</div>
                                                        <div className="text-green-300 text-xs">True Positive</div>
                                                    </div>
                                                    <div className="bg-red-500/20 border border-red-500/30 rounded p-3 text-center">
                                                        <div className="text-red-400 font-bold text-xl">3</div>
                                                        <div className="text-red-300 text-xs">False Positive</div>
                                                    </div>
                                                    <div className="bg-red-500/20 border border-red-500/30 rounded p-3 text-center">
                                                        <div className="text-red-400 font-bold text-xl">2</div>
                                                        <div className="text-red-300 text-xs">False Negative</div>
                                                    </div>
                                                    <div className="bg-green-500/20 border border-green-500/30 rounded p-3 text-center">
                                                        <div className="text-green-400 font-bold text-xl">23</div>
                                                        <div className="text-green-300 text-xs">True Negative</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Technical Specifications */}
                                <div className="glass-effect rounded-xl p-8 border border-purple-500/30">
                                    <h2 className="text-xl font-bold text-white mb-6">Technical Specifications</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <h3 className="text-purple-300 text-sm mb-3 uppercase tracking-wider">Model Details</h3>
                                            <div className="space-y-2 code-font text-sm">
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Algorithm:</span>
                                                    <span className="text-white">Weighted Scoring</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Version:</span>
                                                    <span className="text-white">v2.1.0</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Features:</span>
                                                    <span className="text-white">4 behavioral</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Output:</span>
                                                    <span className="text-white">0-100% probability</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-purple-300 text-sm mb-3 uppercase tracking-wider">Performance</h3>
                                            <div className="space-y-2 code-font text-sm">
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Inference Time:</span>
                                                    <span className="text-white">&lt;50ms</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Training Time:</span>
                                                    <span className="text-white">~8 seconds</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Memory Usage:</span>
                                                    <span className="text-white">~2.5 MB</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Scalability:</span>
                                                    <span className="text-white">1M+ predictions/day</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-purple-300 text-sm mb-3 uppercase tracking-wider">Deployment</h3>
                                            <div className="space-y-2 code-font text-sm">
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Platform:</span>
                                                    <span className="text-white">Cloud-Native</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">API Latency:</span>
                                                    <span className="text-white">&lt;100ms</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Uptime:</span>
                                                    <span className="text-white">99.9%</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-purple-400">Retraining:</span>
                                                    <span className="text-white">Weekly</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <div className="glass-effect rounded-xl p-6 border border-purple-500/30 mt-6">
                            <div className="flex items-center justify-between">
                                <div className="code-font text-purple-300 text-sm">
                                    Â© 2025 AI Purchase Prediction Engine | Supervised Learning Model
                                </div>
                                <div className="flex items-center gap-4 text-sm text-purple-400">
                                    <span>Powered by Machine Learning</span>
                                    <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                                    <span>System Online</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<PurchasePredictionModel />, document.getElementById('root'));
    </script>
</body>
</html>